# docker-compose.dev.yml

name: cr-console-dev
version: '3.8'
services:
  sb-cr-console-dev:
    container_name: sb-cr-console-dev
    image: rkdfydrn1990/sb-cr-console:dev

    build:
      context: .
      dockerfile: Dockerfile.dev  # 개발용 Dockerfile 사용
      args:
        # .env.dev 파일에 있는 MYSQL_URI 값을 자동으로 가져와서 빌드에 주입합니다.
        MYSQL_URI: ${MYSQL_URI}

    # ⭐ 핫 리로드를 위한 볼륨 마운트 설정
    # 로컬 소스 코드 변경 시 컨테이너에 즉시 반영됩니다.
    volumes:
      - .:/app
      - /app/node_modules # 호스트의 node_modules는 무시

    ports:
      - "8005:3000" # 로컬 3000 포트로 접속

    restart: always

    # 이 파일은 AWS 서버의 'docker-compose.dev.yml'과 같은 경로에 있어야 합니다.
    env_file:
      - .env.dev